# JavaScript 如何工作: 引擎 运行时 调用堆栈

> V8 引擎 JavaScript是单线程的 回调队列

## JavaScript 引擎 - V8

- 内存堆：内存分配发生的地方
- 调用栈：代码执行的地方

## 运行时

有些浏览器的API经常被用到（比如：setTimeout），但是，这些API不是引擎提供的

这些引擎之外的API称为Web API，比如 DOM，AJAX，setTimeout等

事件循环 回调队列

## 调用栈

JavaScript 是一门单线程的语言，这一位着他只有一个调用栈，因此，他同一时间只能做一件事。

调用栈是一种数据结构，他记录了我们在程序中的位置。如果我们运行一个函数，它就会将其放置到栈顶。当这个函数返回的时候，就会将这个函数从栈顶弹出。

## 同步任务 和 异步任务

![同步任务和异步任务](./15fdd88994142347)

- 同步任务和异步任务进入不同的场所，同步的进入主线程，异步的进入Event Table并注册函数
- 但指定的事情完成时，Event Table会将这个函数移入Event Queue
- 主线程内的任务执行完毕为空，回去Event Queue读取对应的函数，进入主线程执行
- 上述过程会不断的重复，形成常说的Event Loop

> NOTE: js引擎存在monitoring process进程，会持续不断的检查主线程执行栈是否为空，一旦为空，就会去Event Queue那里检查是否有等待被调用的函数。